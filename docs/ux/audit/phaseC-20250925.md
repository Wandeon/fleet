# UI/UX Phase C Audit — 2025-09-25

## Summary

- Completed operator-critical workflows across logs, camera, settings, and fleet detail, replacing placeholders with the new API helper layer.
- Stabilised the logs experience with level filtering, correlation search, deterministic mock streaming, and export tooling.
- Camera dashboard now surfaces device switching, acknowledgements, clip launches, and clear messaging about pending MediaMTX integration.
- Fleet overview and detail screens render realistic device metadata, metrics, alerts, and action scaffolding via the proxy helpers.
- Playwright UX suites refresh captures for the redesigned flows with artefacts stored at `/opt/fleet/ux-audit/20250925T060143/`.

## Fixes shipped

- `/logs` consumes the enhanced `logs-operations` helpers for REST + SSE, filters by severity/source/search, supports export, and drives deterministic mock streaming for UX tests.
- `/camera` wires through the camera operation shim for device selection, acknowledgements, clip requests, and preview refresh; offline states explain the MediaMTX gap.
- `/settings` binds to shared settings state for token rotation, proxy edits, pairing lifecycle, and operator management with restart banners.
- `/fleet` and `/fleet/[id]` derive data from proxy helpers, exposing module summaries, device metrics, alerts, logs, and guarded action execution flows.
- Added Playwright UX coverage for logs filtering/export, camera review jobs, and fleet device navigation (`apps/ui/tests/ux/*.spec.ts`).

## Mocked interactions / future work

- Camera clip generation and live stream URLs remain mock-backed until `/camera/events/:id/clip` and MediaMTX deployment land.
- Device quick actions (restart/resync) and pairing discoveries simulate backend responses; replace with real endpoints when scheduler and Zigbee coordinator APIs are ready.
- Settings mutations persist in-memory for fields lacking backend support (API token, proxy tuning, invitations).

## Blockers

- Missing backend endpoints for `/camera/overview`, `/settings/*`, `/logs` (level filtering), and `/fleet/devices/:id/actions/:actionId`; tracked under backend backlog ticket #1763.
- Live camera preview relies on MediaMTX rollout; SSE `/logs/stream` needs stable proxy heartbeat configuration to avoid disconnects.
- Operator invitation workflow requires production email delivery (SES/SendGrid) before enabling outside mocks.

## Test coverage

- `apps/ui/tests/ux/logs.spec.ts` — validates level filtering, correlation search, export, and stream pause/resume.
- `apps/ui/tests/ux/camera.spec.ts` — covers device switching, acknowledgement, clip requests, and offline placeholder messaging.
- `apps/ui/tests/ux/fleet-detail.spec.ts` — verifies navigation from `/fleet` to `/fleet/[id]`, metrics rendering, and action affordances.

## Recommendations & remaining gaps

1. Wire the outstanding backend endpoints (camera clips, settings persistence, fleet actions) to move UI off mocks.
2. Add QR code pairing states once hardware service issues tokens; keep restart banners until backend confirms success.
3. Introduce log stream connectivity toast/banner for SSE disconnects in live mode.
4. Extend fleet overview to include video, zigbee, and camera agents when `/fleet/state` aggregates additional modules.
5. Capture regression screenshots for high-value workflows in CI to preserve baselines under `/opt/fleet/ux-audit/`.
